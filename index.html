<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Agroforestry Gallery</title>
  <meta name="description"
    content="Agroforestry Gallery â€” curated agroforestry photographs from the EURAF community on Zenodo. Browse, filter by typology, and view geo-tagged photos on the map." />
  <meta name="theme-color" content="#253d5b" />
  <!-- Open Graph basic tags -->
  <meta property="og:title" content="Agroforestry Gallery" />
  <meta property="og:description"
    content="Browse agroforestry photos from the EURAF community. Filter by typology and view locations on a map." />
  <meta property="og:type" content="website" />
  <!-- Performance: preconnect to commonly used CDNs and tile servers -->
  <link rel="preconnect" href="https://code.jquery.com" crossorigin>
  <link rel="preconnect" href="https://unpkg.com" crossorigin>
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="preconnect" href="https://server.arcgisonline.com" crossorigin>
  <link rel="preconnect" href="https://tile.openstreetmap.org" crossorigin>
  <link rel="icon" type="image/png" href="favicon-digitaf.png" />
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <!-- Leaflet.markercluster CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />
  <link rel="stylesheet" href="css/gallery.css" />
  <style>
    /* quick override for popup image height (adjust if you want larger/smaller) */
    :root {
      --popup-img-height: 140px;
    }
  </style>
</head>

<body>
  <!-- Header Section -->
  <section class="gallery-header text-center">
    <h1>Agroforestry Gallery</h1>

    <h4 class="subheading">Permanent Exposition</h4>
    <div class="info-box">
      <span>
        Every photo in this gallery is here to stay! Each one tells a unique
        story about agroforestry across Europe.<br />
        Explore, get inspired, and discover landscapes, practices, and
        people.<br />
        <span style="font-size: 1.2em">&#127757;</span> Some photos are
        geo-tagged - look for the globe icon to see their location!
      </span>
    </div>
    <div class="row no-gutters">
      <div class="col-4"></div>
      <div class="col-4">
        <div class="visualizations-counter mt-3 d-inline-block mb-3 px-3 py-2 rounded shadow-sm"
          style="background: #eafbe7; border-left: 4px solid #008b00">
          <div style="display:flex;align-items:center;gap:12px">
            <p class="m-0 pl-2" style="font-weight: 600; color: #253d5b">
              Total visualizations:
              <span id="visualization-count" style="font-size: 1.2em">0</span>
              <sup id="star-badge" class="star-badge">&#128175;</sup>
            </p>
          </div>
        </div>
      </div>
      <div id="active-filters" class="col-4"></div>
    </div>
  </section>

  <!-- Floating button on the top-left -->
  <div class="d-flex justify-content-center align-items-a my-3 gap-3">
    <button class="sticky-btn" id="open-filter">
      <span>&#128269;</span><span class="sticky-btn-text"> Filters</span>
    </button>
    <button class="sticky-btn" id="open-map" style="display: none">
      <span>&#128506;</span><span class="sticky-btn-text"> Map</span>
    </button>
    <button class="sticky-btn" id="open-gallery" style="display: none">
      <span>&#128444;</span><span class="sticky-btn-text"> Gallery</span>
    </button>
    <button class="sticky-btn-right" id="open-about" type="button">
      <span>&#8505;</span><span class="sticky-btn-text"> About</span>
    </button>
    <button class="sticky-btn-right" id="open-add-photos">
      <span>&#128247;</span><span class="sticky-btn-text"> Add Photo</span>
    </button>
    <!-- About Modal Section -->
    <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog" aria-labelledby="aboutModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header text-center">
            <h4 class="modal-title m-0" id="aboutModalLabel">
              About Agroforestry Gallery
            </h4>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p>
              The <strong>Agroforestry Gallery</strong> is a key feature of
              <strong>DigitAF's Agroforestry Virtual Space</strong>, providing
              a dynamic platform for sharing and exploring
              agroforestry-related images.<br />
              Through the gallery, users can upload their own photos directly
              to the
              <a href="https://zenodo.org/communities/euraf-media" target="_blank">EURAF Agroforestry Media Zenodo
                community</a>. Each uploaded image receives a DOI, is stored under an open
              license (default: CC BY 4.0), and is automatically integrated
              into the gallery via the <a href="https://iiif.io/" target="_blank">International Image Interoperability
                Framework (IIIF)</a> and the <a href="https://zenodo.org/" target="_blank">Zenodo</a> API.<br />
              Because it is served directly from the <a href="https://github.com/euraf/agroforestry-gallery" target="_blank">EURAF GitHub
                repository</a>,
              <strong>the gallery can easily be embedded or adapted by other projects</strong>, making it a ready-to-use
              solution for anyone who wants to
              showcase agroforestry imagery on their own website.<br />
              Its decentralized workflow is simple yet sustainable:
              contributors submit photos to Zenodo, EURAF curators review them for quality, and approved images appear
              in the public gallery. This approach ensures long-term scalability, even after the DigitAF project
              concludes, and may inspire other initiatives to reuse both the concept and the code.<br />
              It offers an elegant and FAIR-compliant solution to image storing and sharing, avoiding "Can I use this
              picture?", "Where is the full resolution to use in printing material", "Who is the author of this
              picture?" or "How do I cite this picture". The gallery features permanent, curated photo collections from
              EURAF and its partners. All images are freely available for learning and exploration, with geo-tagged
              photos marked by a globe icon, when the coordinate is supplied by the author in the Zenodo record.
              <strong>By participating, you not only share your own perspective on agroforestry but also support an
                open, collaborative approach to knowledge sharing that reflects EURAF's values</strong>.<br />
              To learn more, contribute, or explore how this gallery can enrich your own platform, visit
              <a href="https://digitaf.eu" target="_blank">DigitAF</a> and read the <a href="https://github.com/euraf/agroforestry-gallery/blob/main/README.md"
                target="_blank">README</a> file in the github repository.
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Off-Canvas Word Cloud Sidebar -->
  <div class="offcanvas-wordcloud" id="wordcloudDrawer">
    <div class="offcanvas-header">
      <h4>Filter by Keywords</h4>
      <button class="close-button" id="close-filter">&times;</button>
    </div>
    <div class="word-cloud" id="word-cloud">
      <!-- Word cloud filters will be dynamically inserted here -->
    </div>
  </div>
  <!-- Off-Canvas Add Photos Sidebar -->
  <div class="offcanvas-add-photos" id="addPhotosDrawer">
    <div class="offcanvas-header">
      <h4>Add Your Photos</h4>
      <button class="close-button" id="close-add-photos">&times;</button>
    </div>
    <div id="add-photos-content" class="add-photos-content">
      <div class="instructions-section">
        <!-- Instructions will be loaded dynamically from zenodo-upload-instructions.md -->
        <p>ðŸ“· Loading upload instructions...</p>
      </div>
    </div>
  </div>

  <div id="wrapper">
    <div class="container">
      <div class="row">
        <div class="col-md-12 text-center">
          <div id="gallery-map" style="width: 100%; height: 600px; display: none"></div>

          <div class="grid" id="gallery">
            <div class="grid-sizer"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Sticky Footer Section -->

  <footer class="footer" aria-label="site credits">
    <p class="meta m-0">
      <small>
        Developed by
        <a href="https://www.mvarc.eu" target="_blank" rel="noopener">MVARC</a>
        for the
        <a href="https://www.digitaf.eu" target="_blank" rel="noopener">DigitAF</a>
        project.
      </small>
      <span id="footermessage" class="sr-only" aria-hidden="true"></span>
    </p>
  </footer>

  <!-- Loading Bar for Gallery -->
  <div id="gallery-loading-bar-container" style="width: 100%; max-width: 600px; margin: 2em auto; display: none">
    <div id="gallery-loading-bar" style="
          height: 18px;
          width: 0%;
          background: #008b00;
          transition: width 0.3s;
        "></div>
    <div id="gallery-loading-bar-text" style="
          text-align: center;
          font-size: 0.95em;
          color: #253d5b;
          margin-top: 2px;
        ">
      Loading photos...
    </div>
  </div>

  <!-- External JavaScript -->
  <script>
    document
      .getElementById("open-about")
      .addEventListener("click", function () {
        $("#aboutModal").modal("show");
      });
  </script>
  <!-- Use full jQuery (required by some plugins such as Magnific Popup) -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.js"></script>
  <script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
  <!-- Fallback message for users with JS disabled -->
  <noscript>
    <div style="text-align:center;padding:1em;background:#fff3cd;color:#856404;border:1px solid #ffeeba;margin:1em;">
      This gallery requires JavaScript to load interactive features (filters, map). Please enable JavaScript in your
      browser.
    </div>
  </noscript>

  <script src="js/gallery.js" defer></script>
</body>

</html>